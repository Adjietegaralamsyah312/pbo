<!-- Tambahkan kode ini di BAGIAN PALING AKHIR sebelum </body> -->
<!-- Modal Pembayaran -->
<div class="payment-modal" id="paymentModal">
    <div class="payment-modal-content">
        <div class="payment-modal-header">
            <h2><i class="fas fa-credit-card"></i> Pembayaran</h2>
            <button class="payment-close-btn" id="paymentCloseBtn">&times;</button>
        </div>
        <div class="payment-modal-body">
            <div class="payment-steps">
                <div class="step active" id="step1">
                    <h3>1. Ringkasan Pesanan</h3>
                    <div class="order-summary" id="orderSummary">
                        <!-- Order items akan diisi dengan JavaScript -->
                    </div>
                    <div class="order-total">
                        <div class="total-row">
                            <span>Subtotal</span>
                            <span id="subtotal">Rp 0</span>
                        </div>
                        <div class="total-row">
                            <span>Pajak (10%)</span>
                            <span id="tax">Rp 0</span>
                        </div>
                        <div class="total-row total">
                            <span><strong>Total Pembayaran</strong></span>
                            <span id="totalAmount"><strong>Rp 0</strong></span>
                        </div>
                    </div>
                </div>
                
                <div class="step" id="step2">
                    <h3>2. Pilih Metode Pembayaran</h3>
                    <div class="payment-methods">
                        <div class="payment-method active" data-method="qris">
                            <i class="fas fa-qrcode"></i>
                            <span>QRIS</span>
                        </div>
                        <div class="payment-method" data-method="transfer">
                            <i class="fas fa-university"></i>
                            <span>Transfer Bank</span>
                        </div>
                        <div class="payment-method" data-method="cash">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>Tunai di Tempat</span>
                        </div>
                        <div class="payment-method" data-method="card">
                            <i class="fas fa-credit-card"></i>
                            <span>Kartu Kredit/Debit</span>
                        </div>
                    </div>
                    
                    <!-- QRIS Section -->
                    <div class="payment-details" id="qrisDetails">
                        <div class="qris-code">
                            <div class="qris-placeholder">
                                <i class="fas fa-qrcode"></i>
                                <p>Scan QR Code untuk pembayaran</p>
                            </div>
                        </div>
                        <p class="payment-instruction">Scan QR code di atas menggunakan aplikasi e-wallet atau mobile banking yang mendukung QRIS</p>
                    </div>
                    
                    <!-- Transfer Bank Section -->
                    <div class="payment-details" id="transferDetails" style="display: none;">
                        <div class="bank-accounts">
                            <div class="bank-account">
                                <div class="bank-info">
                                    <i class="fas fa-university"></i>
                                    <div>
                                        <h4>BCA</h4>
                                        <p>1234567890</p>
                                        <p>Gourmet Haven Restaurant</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bank-account">
                                <div class="bank-info">
                                    <i class="fas fa-university"></i>
                                    <div>
                                        <h4>Mandiri</h4>
                                        <p>0987654321</p>
                                        <p>Gourmet Haven Restaurant</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="payment-instruction">Transfer ke salah satu rekening di atas dan upload bukti transfer di langkah berikutnya</p>
                    </div>
                    
                    <!-- Cash Section -->
                    <div class="payment-details" id="cashDetails" style="display: none;">
                        <div class="cash-info">
                            <i class="fas fa-money-bill-wave"></i>
                            <p>Bayar secara tunai saat Anda datang ke restoran.</p>
                            <p>Pastikan membawa uang pas untuk kenyamanan transaksi.</p>
                        </div>
                    </div>
                    
                    <!-- Card Section -->
                    <div class="payment-details" id="cardDetails" style="display: none;">
                        <form id="cardForm">
                            <div class="form-group">
                                <label for="cardNumber">Nomor Kartu</label>
                                <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expiryDate">Masa Berlaku</label>
                                    <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5">
                                </div>
                                <div class="form-group">
                                    <label for="cvv">CVV</label>
                                    <input type="password" id="cvv" placeholder="123" maxlength="3">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="cardName">Nama di Kartu</label>
                                <input type="text" id="cardName" placeholder="Nama Lengkap">
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="step" id="step3">
                    <h3>3. Konfirmasi Pembayaran</h3>
                    <div class="confirmation-message">
                        <i class="fas fa-check-circle"></i>
                        <h4>Pesanan Anda Telah Diterima!</h4>
                        <p>Kode pemesanan: <strong id="orderCode">GH-2023-001</strong></p>
                        <p>Estimasi waktu penyiapan: <strong>30-45 menit</strong></p>
                        <p>Silakan datang ke restoran untuk mengambil pesanan atau tunggu konfirmasi untuk pesanan takeaway.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="payment-modal-footer">
            <button class="btn btn-secondary" id="prevBtn">Sebelumnya</button>
            <button class="btn" id="nextBtn">Lanjut</button>
            <button class="btn" id="payNowBtn" style="display: none;">
                <i class="fas fa-lock"></i>
                Bayar Sekarang
            </button>
        </div>
    </div>
</div>

<!-- Shopping Cart Floating Button -->
<div class="cart-floating" id="cartFloating">
    <button class="cart-btn" id="cartBtn">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cartCount">0</span>
    </button>
</div>

<!-- Tambahkan CSS ini di dalam <style> tag -->
<style>
    /* Shopping Cart Floating Button */
    .cart-floating {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 999;
    }

    .cart-btn {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        box-shadow: var(--shadow-heavy);
    }

    .cart-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 10px 25px rgba(193, 154, 83, 0.3);
    }

    .cart-count {
        position: absolute;
        top: -5px;
        right: -5px;
        background-color: var(--accent-color);
        color: white;
        width: 25px;
        height: 25px;
        border-radius: 50%;
        font-size: 0.8rem;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    /* Payment Modal */
    .payment-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 9999;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }

    .payment-modal-content {
        background-color: white;
        border-radius: var(--border-radius);
        width: 100%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: var(--shadow-heavy);
        animation: modalSlideIn 0.3s ease;
    }

    @keyframes modalSlideIn {
        from {
            opacity: 0;
            transform: translateY(-50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .payment-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid var(--light-gray);
    }

    .payment-modal-header h2 {
        margin: 0;
        font-size: 1.5rem;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .payment-close-btn {
        background: none;
        border: none;
        font-size: 2rem;
        cursor: pointer;
        color: var(--gray-color);
        transition: var(--transition);
        line-height: 1;
    }

    .payment-close-btn:hover {
        color: var(--accent-color);
    }

    .payment-modal-body {
        padding: 1.5rem;
    }

    .payment-modal-footer {
        padding: 1.5rem;
        border-top: 1px solid var(--light-gray);
        display: flex;
        justify-content: space-between;
        gap: 1rem;
    }

    /* Payment Steps */
    .payment-steps {
        position: relative;
    }

    .step {
        display: none;
    }

    .step.active {
        display: block;
        animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .step h3 {
        margin-bottom: 1.5rem;
        color: var(--primary-color);
        font-size: 1.3rem;
    }

    /* Order Summary */
    .order-summary {
        max-height: 200px;
        overflow-y: auto;
        margin-bottom: 1.5rem;
        border: 1px solid var(--light-gray);
        border-radius: var(--border-radius-sm);
        padding: 1rem;
    }

    .order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.8rem 0;
        border-bottom: 1px solid var(--light-gray);
    }

    .order-item:last-child {
        border-bottom: none;
    }

    .order-item-info {
        flex: 1;
    }

    .order-item-name {
        font-weight: 600;
        margin-bottom: 0.3rem;
    }

    .order-item-price {
        color: var(--primary-color);
        font-weight: 600;
    }

    .order-item-quantity {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 0.5rem;
    }

    .quantity-btn {
        width: 25px;
        height: 25px;
        border-radius: 50%;
        border: 1px solid var(--light-gray);
        background: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        transition: var(--transition);
    }

    .quantity-btn:hover {
        background-color: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
    }

    .order-item-total {
        font-weight: 600;
        min-width: 100px;
        text-align: right;
    }

    .remove-item {
        background: none;
        border: none;
        color: #ff6b6b;
        cursor: pointer;
        font-size: 1.2rem;
        margin-left: 1rem;
        transition: var(--transition);
    }

    .remove-item:hover {
        color: #ff4757;
    }

    .order-total {
        background-color: var(--light-color);
        padding: 1.2rem;
        border-radius: var(--border-radius-sm);
    }

    .total-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.8rem;
    }

    .total-row.total {
        border-top: 2px solid var(--primary-color);
        padding-top: 0.8rem;
        margin-top: 0.8rem;
        font-size: 1.1rem;
    }

    /* Payment Methods */
    .payment-methods {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-bottom: 2rem;
    }

    @media (max-width: 480px) {
        .payment-methods {
            grid-template-columns: 1fr;
        }
    }

    .payment-method {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1.5rem 1rem;
        border: 2px solid var(--light-gray);
        border-radius: var(--border-radius-sm);
        cursor: pointer;
        transition: var(--transition);
        text-align: center;
    }

    .payment-method:hover {
        border-color: var(--primary-color);
        transform: translateY(-3px);
    }

    .payment-method.active {
        border-color: var(--primary-color);
        background-color: rgba(193, 154, 83, 0.1);
    }

    .payment-method i {
        font-size: 2rem;
        color: var(--primary-color);
        margin-bottom: 0.8rem;
    }

    .payment-method span {
        font-weight: 600;
    }

    /* Payment Details */
    .payment-details {
        background-color: var(--light-color);
        padding: 1.5rem;
        border-radius: var(--border-radius-sm);
        margin-top: 1rem;
    }

    .qris-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: white;
        padding: 2rem;
        border-radius: var(--border-radius-sm);
        border: 2px dashed var(--light-gray);
    }

    .qris-placeholder i {
        font-size: 4rem;
        color: var(--primary-color);
        margin-bottom: 1rem;
    }

    .bank-accounts {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .bank-account {
        background: white;
        padding: 1.2rem;
        border-radius: var(--border-radius-sm);
        border: 1px solid var(--light-gray);
    }

    .bank-info {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .bank-info i {
        font-size: 2rem;
        color: var(--primary-color);
    }

    .bank-info h4 {
        margin: 0 0 0.3rem 0;
    }

    .bank-info p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--gray-color);
    }

    .cash-info {
        text-align: center;
        padding: 2rem;
    }

    .cash-info i {
        font-size: 4rem;
        color: var(--primary-color);
        margin-bottom: 1rem;
    }

    .payment-instruction {
        margin-top: 1rem;
        font-size: 0.9rem;
        color: var(--gray-color);
        text-align: center;
        font-style: italic;
    }

    /* Confirmation Message */
    .confirmation-message {
        text-align: center;
        padding: 2rem;
    }

    .confirmation-message i {
        font-size: 4rem;
        color: #4CAF50;
        margin-bottom: 1rem;
    }

    .confirmation-message h4 {
        color: var(--primary-color);
        margin-bottom: 1rem;
    }

    .confirmation-message p {
        margin-bottom: 0.5rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .payment-modal-content {
            margin: 20px;
            max-height: 85vh;
        }
        
        .cart-floating {
            bottom: 20px;
            right: 20px;
        }
        
        .cart-btn {
            width: 50px;
            height: 50px;
            font-size: 1.3rem;
        }
    }

    @media (max-width: 480px) {
        .payment-modal-body {
            padding: 1rem;
        }
        
        .payment-modal-footer {
            flex-direction: column;
        }
        
        .payment-modal-footer .btn {
            width: 100%;
        }
    }
</style>

<!-- Tambahkan JavaScript ini di dalam <script> tag sebelum penutup -->
<script>
    // Shopping Cart System
    let shoppingCart = JSON.parse(localStorage.getItem('gourmetCart')) || [];
    let currentStep = 1;
    let selectedPaymentMethod = 'qris';

    // DOM Elements for Payment System
    const cartFloating = document.getElementById('cartFloating');
    const cartBtn = document.getElementById('cartBtn');
    const cartCount = document.getElementById('cartCount');
    const paymentModal = document.getElementById('paymentModal');
    const paymentCloseBtn = document.getElementById('paymentCloseBtn');
    const orderSummary = document.getElementById('orderSummary');
    const subtotalElement = document.getElementById('subtotal');
    const taxElement = document.getElementById('tax');
    const totalAmountElement = document.getElementById('totalAmount');
    const paymentMethods = document.querySelectorAll('.payment-method');
    const paymentDetails = document.querySelectorAll('.payment-details');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const payNowBtn = document.getElementById('payNowBtn');
    const steps = document.querySelectorAll('.step');
    const cardForm = document.getElementById('cardForm');
    const orderCode = document.getElementById('orderCode');

    // Update cart count
    function updateCartCount() {
        const totalItems = shoppingCart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = totalItems;
        
        // Show/hide cart button
        if (totalItems > 0) {
            cartFloating.style.display = 'block';
        } else {
            cartFloating.style.display = 'none';
        }
    }

    // Add item to cart
    function addToCart(itemId) {
        const item = menuData.find(i => i.id == itemId);
        if (!item) return;

        const existingItem = shoppingCart.find(i => i.id == itemId);
        
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            shoppingCart.push({
                id: item.id,
                name: item.name,
                price: item.price,
                quantity: 1,
                image: item.image
            });
        }
        
        saveCart();
        updateCartCount();
        showToast(`"${item.name}" ditambahkan ke keranjang!`);
    }

    // Remove item from cart
    function removeFromCart(itemId) {
        shoppingCart = shoppingCart.filter(item => item.id != itemId);
        saveCart();
        updateCartCount();
        renderOrderSummary();
    }

    // Update item quantity
    function updateQuantity(itemId, change) {
        const item = shoppingCart.find(i => i.id == itemId);
        if (!item) return;

        item.quantity += change;
        
        if (item.quantity < 1) {
            removeFromCart(itemId);
        } else {
            saveCart();
            renderOrderSummary();
        }
    }

    // Save cart to localStorage
    function saveCart() {
        localStorage.setItem('gourmetCart', JSON.stringify(shoppingCart));
    }

    // Calculate order total
    function calculateTotal() {
        const subtotal = shoppingCart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const tax = subtotal * 0.1; // 10% tax
        const total = subtotal + tax;
        
        return { subtotal, tax, total };
    }

    // Render order summary
    function renderOrderSummary() {
        if (shoppingCart.length === 0) {
            orderSummary.innerHTML = `
                <div style="text-align: center; padding: 2rem; color: var(--gray-color);">
                    <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                    <p>Keranjang belanja kosong</p>
                </div>
            `;
            subtotalElement.textContent = 'Rp 0';
            taxElement.textContent = 'Rp 0';
            totalAmountElement.innerHTML = '<strong>Rp 0</strong>';
            return;
        }

        const { subtotal, tax, total } = calculateTotal();
        
        orderSummary.innerHTML = shoppingCart.map(item => `
            <div class="order-item">
                <div class="order-item-info">
                    <div class="order-item-name">${item.name}</div>
                    <div class="order-item-price">Rp ${item.price.toLocaleString('id-ID')}</div>
                    <div class="order-item-quantity">
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                    </div>
                </div>
                <div class="order-item-total">
                    Rp ${(item.price * item.quantity).toLocaleString('id-ID')}
                </div>
                <button class="remove-item" onclick="removeFromCart(${item.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `).join('');

        subtotalElement.textContent = `Rp ${subtotal.toLocaleString('id-ID')}`;
        taxElement.textContent = `Rp ${tax.toLocaleString('id-ID')}`;
        totalAmountElement.innerHTML = `<strong>Rp ${total.toLocaleString('id-ID')}</strong>`;
    }

    // Generate order code
    function generateOrderCode() {
        const date = new Date();
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        const randomNum = Math.floor(Math.random() * 1000);
        return `GH-${year}${month}${day}-${String(randomNum).padStart(3, '0')}`;
    }

    // Show payment step
    function showStep(stepNumber) {
        steps.forEach(step => step.classList.remove('active'));
        document.getElementById(`step${stepNumber}`).classList.add('active');
        currentStep = stepNumber;
        
        // Update buttons
        prevBtn.style.display = stepNumber === 1 ? 'none' : 'inline-flex';
        
        if (stepNumber === 3) {
            nextBtn.style.display = 'none';
            payNowBtn.style.display = 'none';
        } else if (stepNumber === 2) {
            nextBtn.style.display = 'none';
            payNowBtn.style.display = 'inline-flex';
        } else {
            nextBtn.style.display = 'inline-flex';
            payNowBtn.style.display = 'none';
        }
    }

    // Validate card form
    function validateCardForm() {
        const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
        const expiryDate = document.getElementById('expiryDate').value;
        const cvv = document.getElementById('cvv').value;
        const cardName = document.getElementById('cardName').value.trim();

        if (!cardNumber || cardNumber.length < 16) {
            showToast('Nomor kartu tidak valid', 'error');
            return false;
        }

        if (!expiryDate.match(/^\d{2}\/\d{2}$/)) {
            showToast('Format masa berlaku salah (MM/YY)', 'error');
            return false;
        }

        if (!cvv || cvv.length !== 3) {
            showToast('CVV harus 3 digit', 'error');
            return false;
        }

        if (!cardName) {
            showToast('Nama di kartu harus diisi', 'error');
            return false;
        }

        return true;
    }

    // Process payment
    function processPayment() {
        if (shoppingCart.length === 0) {
            showToast('Keranjang belanja kosong', 'error');
            return;
        }

        if (selectedPaymentMethod === 'card' && !validateCardForm()) {
            return;
        }

        // Generate order code
        const newOrderCode = generateOrderCode();
        orderCode.textContent = newOrderCode;

        // Simulate payment processing
        showToast('Memproses pembayaran...');
        
        setTimeout(() => {
            showStep(3);
            
            // Save order to localStorage
            const order = {
                code: newOrderCode,
                items: shoppingCart,
                total: calculateTotal().total,
                paymentMethod: selectedPaymentMethod,
                date: new Date().toISOString(),
                status: 'completed'
            };
            
            const orders = JSON.parse(localStorage.getItem('gourmetOrders')) || [];
            orders.push(order);
            localStorage.setItem('gourmetOrders', JSON.stringify(orders));
            
            // Clear cart
            shoppingCart = [];
            saveCart();
            updateCartCount();
            
            showToast('Pembayaran berhasil!', 'success');
        }, 2000);
    }

    // Initialize payment system
    function initPaymentSystem() {
        // Update cart count on load
        updateCartCount();
        
        // Open payment modal when cart button is clicked
        cartBtn.addEventListener('click', () => {
            if (shoppingCart.length === 0) {
                showToast('Keranjang belanja kosong', 'error');
                return;
            }
            
            renderOrderSummary();
            showStep(1);
            paymentModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        });

        // Close payment modal
        paymentCloseBtn.addEventListener('click', () => {
            paymentModal.style.display = 'none';
            document.body.style.overflow = '';
        });

        // Close modal when clicking outside
        paymentModal.addEventListener('click', (e) => {
            if (e.target === paymentModal) {
                paymentModal.style.display = 'none';
                document.body.style.overflow = '';
            }
        });

        // Payment method selection
        paymentMethods.forEach(method => {
            method.addEventListener('click', () => {
                paymentMethods.forEach(m => m.classList.remove('active'));
                method.classList.add('active');
                selectedPaymentMethod = method.getAttribute('data-method');
                
                // Show corresponding payment details
                paymentDetails.forEach(detail => detail.style.display = 'none');
                document.getElementById(`${selectedPaymentMethod}Details`).style.display = 'block';
            });
        });

        // Navigation buttons
        prevBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentStep < 3) {
                showStep(currentStep + 1);
            }
        });

        payNowBtn.addEventListener('click', processPayment);

        // Format card number input
        const cardNumberInput = document.getElementById('cardNumber');
        if (cardNumberInput) {
            cardNumberInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
                let formattedValue = '';
                
                for (let i = 0; i < value.length; i++) {
                    if (i > 0 && i % 4 === 0) {
                        formattedValue += ' ';
                    }
                    formattedValue += value[i];
                }
                
                e.target.value = formattedValue.substring(0, 19);
            });
        }

        // Format expiry date input
        const expiryDateInput = document.getElementById('expiryDate');
        if (expiryDateInput) {
            expiryDateInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                
                e.target.value = value.substring(0, 5);
            });
        }

        // Prevent non-numeric input for CVV
        const cvvInput = document.getElementById('cvv');
        if (cvvInput) {
            cvvInput.addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\D/g, '').substring(0, 3);
            });
        }
    }

    // Initialize payment system when page loads
    document.addEventListener('DOMContentLoaded', () => {
        // Add event listeners to all "Pesan" buttons in menu
        setTimeout(() => {
            document.querySelectorAll('.menu-item-footer .btn').forEach(btn => {
                const originalOnClick = btn.onclick;
                btn.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const itemId = this.getAttribute('data-id');
                    addToCart(itemId);
                    
                    // Call original onclick if it exists
                    if (typeof originalOnClick === 'function') {
                        originalOnClick.call(this, e);
                    }
                };
            });
        }, 1000);
        
        initPaymentSystem();
    });

    // Make functions available globally
    window.addToCart = addToCart;
    window.removeFromCart = removeFromCart;
    window.updateQuantity = updateQuantity;
</script>
Ini jadi nya apa
